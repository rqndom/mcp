<html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><title>curve.py profile report</title><style type="text/css">span{width:200px;height:7px;display:inline-block;background-color:#ffffff;}.c{display:inline-block;background-color:#0044ff;}.o{display:inline-block;background-color:#00bbff;}td{padding-right:14px;}pre{margin-top:0px;margin-bottom:0px;}.heat1{background-color:#fff080;}.heat2{background-color:#ffe040;}.heat3{background-color:#ffb000;}.heat4{background-color:#ff8000;}.heat5{background-color:#ff4000;}.heat6{background-color:#ff0000;}</style></head><body><h1>General information</h1><table><tr><td>Command line:<br>Working directory:<br>Total sample count:<br>Execution time:<br></td><td>curve.py<br>dev/mcp<br>1612<br>16.60 sec<br></td></tr></table><h1>Summary</h1><h2>Modules</h2><table><tr><td><pre>28.72	35.86	<span><span class="c" style="width: 57px"></span><span class="o" style="width: 14px"></span></span>
2.73	3.54	<span><span class="c" style="width: 5px"></span><span class="o" style="width: 1px"></span></span>
0.00	3.54	<span><span class="o" style="width: 7px"></span></span>
3.54	3.54	<span><span class="c" style="width: 7px"></span></span>
0.81	0.81	<span><span class="c" style="width: 1px"></span></span>
0.00	0.19	<span><span class="o" style="width: 0px"></span></span>
0.00	0.19	<span><span class="o" style="width: 0px"></span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.06	0.06	<span><span class="c" style="width: 0px"></span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
</pre></td><td><pre>__main__
numpy.lib.function_base
numpy.core.fromnumeric
numpy.core._methods
numpy.core.numeric
numpy.add_newdocs
numpy
numpy.lib
sre_compile
numpy.lib.type_check
numpy.core._internal
re
numpy.core
</pre></td></tr></table><h2>Functions</h2><table><tr><td><pre>0.00	35.86	<span><span class="o" style="width: 71px"></span></span>
3.23	35.67	<span><span class="c" style="width: 6px"></span><span class="o" style="width: 64px"></span></span>
0.00	30.96	<span><span class="o" style="width: 61px"></span></span>
0.00	30.89	<span><span class="o" style="width: 61px"></span></span>
1.05	22.15	<span><span class="c" style="width: 2px"></span><span class="o" style="width: 42px"></span></span>
14.08	14.45	<span><span class="c" style="width: 28px"></span><span class="o" style="width: 0px"></span></span>
5.46	10.24	<span><span class="c" style="width: 10px"></span><span class="o" style="width: 9px"></span></span>
4.78	4.78	<span><span class="c" style="width: 9px"></span></span>
3.54	3.54	<span><span class="c" style="width: 7px"></span></span>
0.00	3.54	<span><span class="o" style="width: 7px"></span></span>
2.61	3.41	<span><span class="c" style="width: 5px"></span><span class="o" style="width: 1px"></span></span>
0.06	1.49	<span><span class="c" style="width: 0px"></span><span class="o" style="width: 2px"></span></span>
0.00	1.49	<span><span class="o" style="width: 2px"></span></span>
0.81	0.81	<span><span class="c" style="width: 1px"></span></span>
0.06	0.25	<span><span class="c" style="width: 0px"></span><span class="o" style="width: 0px"></span></span>
0.00	0.19	<span><span class="o" style="width: 0px"></span></span>
0.00	0.19	<span><span class="o" style="width: 0px"></span></span>
0.12	0.12	<span><span class="c" style="width: 0px"></span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.06	0.06	<span><span class="c" style="width: 0px"></span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
</pre></td><td><pre>__main__: &lt;module&gt;
__main__: main
__main__: _compute_curve
__main__: &lt;lambda&gt;
__main__: compute_v3
__main__: gaussian_window
__main__: _redraw
__main__: draw_path
numpy.core._methods: _sum
numpy.core.fromnumeric: sum
numpy.lib.function_base: meshgrid
__main__: _add_point
__main__: mouseMoveEvent
numpy.core.numeric: ones
__main__: norm
numpy.add_newdocs: &lt;module&gt;
numpy: &lt;module&gt;
numpy.lib.function_base: add_newdoc
numpy.core: &lt;module&gt;
sre_compile: _code
sre_compile: compile
sre_compile: _compile
numpy.lib: &lt;module&gt;
numpy.lib.type_check: &lt;module&gt;
re: _compile
__main__: mouseReleaseEvent
sre_compile: _compile_charset
numpy.core._internal: &lt;module&gt;
sre_compile: _optimize_charset
re: compile
</pre></td></tr></table><h1>Line-by-line profile</h1><h2>__main__</h2><table><tr><td><pre>0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.06	0.25	<span><span class="c" style="width: 0px"></span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
12.72	12.72	<span><span class="c" style="width: 25px"></span></span>
1.36	1.74	<span><span class="c" style="width: 2px"></span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.12	3.04	<span><span class="c" style="width: 0px"></span><span class="o" style="width: 5px"></span></span>
0.00	15.01	<span><span class="o" style="width: 30px"></span></span>
0.00	0.00	<span></span>
0.87	0.99	<span><span class="c" style="width: 1px"></span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.06	0.12	<span><span class="c" style="width: 0px"></span><span class="o" style="width: 0px"></span></span>
0.00	2.92	<span><span class="o" style="width: 5px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
4.78	4.78	<span><span class="c" style="width: 9px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	30.89	<span><span class="o" style="width: 61px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	1.49	<span><span class="o" style="width: 2px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.06	1.49	<span><span class="c" style="width: 0px"></span><span class="o" style="width: 2px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
1.24	1.24	<span><span class="c" style="width: 2px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.25	2.54	<span><span class="c" style="width: 0px"></span><span class="o" style="width: 4px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	2.05	<span><span class="o" style="width: 4px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.12	0.31	<span><span class="c" style="width: 0px"></span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
3.23	3.41	<span><span class="c" style="width: 6px"></span><span class="o" style="width: 0px"></span></span>
0.19	0.19	<span><span class="c" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.43	0.43	<span><span class="c" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	19.17	<span><span class="o" style="width: 38px"></span></span>
0.00	0.00	<span></span>
0.00	11.79	<span><span class="o" style="width: 23px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.31	0.31	<span><span class="c" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
2.92	35.36	<span><span class="c" style="width: 5px"></span><span class="o" style="width: 64px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	35.79	<span><span class="o" style="width: 71px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
</pre></td><td><pre>7	import sys
8	import cairo
9	import numpy as np
10	import math
11	
12	def norm(array, axis=0):
13		return np.sqrt(np.sum(array ** 2, axis=1))
14	
15	def gaussian_window(X, mu, sigma):
</pre><pre class="heat2">16		G = np.exp(-(X - mu) ** 2 / (2 * sigma ** 2))
</pre><pre>17		return G / np.sum(G, axis=0)
18	
19	# let's try some smoothing with springs and complicated integration methods...

	(...)

87		P = np.array(points, dtype=np.float)
88		
89		L = norm(P[1:] - P[:-1], axis=1)
90		X = np.zeros(P.shape[0])
91		for i in xrange(P.shape[0] - 1):
92			X[i + 1] = X[i] + L[i]
93		
94		X2, X1 = np.meshgrid(X, X)
</pre><pre class="heat2">95		G = gaussian_window(X1, X2, sigma)
</pre><pre>96	
97		GP = np.einsum('kj,ki-&gt;ijk', P, G)
98			
99		P = np.sum(GP, axis=2)
100		return P.tolist()
101	
102	def oversampled(points, threshold=10):

	(...)

117			for pt in points[1:]:
118				ctx.line_to(*pt)
119			ctx.stroke()
120		
121	class Window(QWidget):

	(...)

132			self.slider.setValue(50)
133	
</pre><pre class="heat6">134			self.slider.valueChanged.connect(lambda value: self._compute_curve())
</pre><pre>135			self.slider.valueChanged.connect(self._set_label)
136			

	(...)

176		def mouseMoveEvent(self, event):
177			if self.draw_mode:
178				self._add_point(event)
179				
180		def mouseReleaseEvent(self, event):

	(...)

183				self.draw_mode = False
184				self.points = oversampled(self.points)
185				self._compute_curve()
186		
187		def _add_point(self, mouse_event):

	(...)

190				mouse_event.y() - self.image_label.y()
191			))
192			self._redraw()
193		
194		def _redraw(self):

	(...)

203			ctx.rectangle(0, 0, im.get_width(), im.get_height())
204			ctx.set_source_rgb(1.0, 1.0, 1.0)
205			ctx.fill()
206			
207			ctx.set_line_width(5)

	(...)

210			if self.new_points:
211				ctx.set_source_rgb(0.95, 0.95, 0.95)
212				draw_path(ctx, self.points)
213				
214				ctx.set_source_rgb(0.0, 0.0, 0.0)
215				draw_path(ctx, self.new_points)
216			else:
217				ctx.set_source_rgb(0.0, 0.0, 0.0)
218				draw_path(ctx, self.points)
219			
220			# transform cairo image to qt image

	(...)

223				im.get_width(),
224				im.get_height(),
225				QImage.Format_ARGB32
226			)
227			self.pixmap = QPixmap.fromImage(image)
228			self.image_label.setPixmap(self.pixmap)
229			
230			self.update()
231			
232		def _compute_curve(self):

	(...)

234				#~self.points = compute_v1(self.points, 0.001, 9, 0.1)
235				#~self.points = compute_v2(self.points, 0.001, 0.1)
</pre><pre class="heat3">236				self.new_points = compute_v3(self.points, self.slider.value())
</pre><pre>237			
</pre><pre class="heat2">238			self._redraw()
</pre><pre>239		
240	def main():
241		app = QApplication(sys.argv)
242	
243		win = Window()
244		win.show()
245		
</pre><pre class="heat6">246		app.exec_()
</pre><pre>247	
248	if __name__ == '__main__':
</pre><pre class="heat6">249		main()
</pre><pre>250	
251	
</pre></td></tr></table><h2>numpy.lib.function_base</h2><table><tr><td><pre>0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.12	0.12	<span><span class="c" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
2.61	3.35	<span><span class="c" style="width: 5px"></span><span class="o" style="width: 1px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
</pre></td><td><pre>3267	                add_docstring(getattr(new, val[0]), val[1].strip())
3268	    except:
3269	        pass
3270	
3271	

	(...)

3407	        # Return the full N-D matrix (not only the 1-D vector)
3408	        if copy_:
3409	            mult_fact = np.ones(shape, dtype=int)
3410	            return [x * mult_fact for x in output]
3411	        else:
3412	            return np.broadcast_arrays(*output)
</pre></td></tr></table><h2>numpy.core.fromnumeric</h2><table><tr><td><pre>0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	3.54	<span><span class="o" style="width: 7px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
</pre></td><td><pre>1714	    else:
1715	        return _methods._sum(a, axis=axis, dtype=dtype,
1716	                            out=out, keepdims=keepdims)
1717	
1718	def product (a, axis=None, dtype=None, out=None, keepdims=False):
</pre></td></tr></table><h2>numpy.core._methods</h2><table><tr><td><pre>0.00	0.00	<span></span>
0.00	0.00	<span></span>
3.54	3.54	<span><span class="c" style="width: 7px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
</pre></td><td><pre>30	
31	def _sum(a, axis=None, dtype=None, out=None, keepdims=False):
32	    return umr_sum(a, axis, dtype, out, keepdims)
33	
34	def _prod(a, axis=None, dtype=None, out=None, keepdims=False):
</pre></td></tr></table><h2>numpy.core.numeric</h2><table><tr><td><pre>0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.62	0.62	<span><span class="c" style="width: 1px"></span></span>
0.19	0.19	<span><span class="c" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
</pre></td><td><pre>182	    """
183	    a = empty(shape, dtype, order)
184	    multiarray.copyto(a, 1, casting='unsafe')
185	    return a
186	
187	def ones_like(a, dtype=None, order='K', subok=True):
</pre></td></tr></table><h2>numpy.add_newdocs</h2><table><tr><td><pre>0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.12	<span><span class="o" style="width: 0px"></span></span>
</pre></td><td><pre>11	from __future__ import division, absolute_import, print_function
12	
13	from numpy.lib import add_newdoc
14	
15	###############################################################################

	(...)

7524	
7525	add_newdoc('numpy.core.numerictypes', 'object_',
7526	    """Any Python object.  Character code: 'O'.""")
</pre></td></tr></table><h2>numpy</h2><table><tr><td><pre>0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.12	<span><span class="o" style="width: 0px"></span></span>
</pre></td><td><pre>168	        return loader(*packages, **options)
169	
170	    from . import add_newdocs
171	    __all__ = ['add_newdocs',
172	               'ModuleDeprecationWarning',

	(...)

214	    import warnings
215	    warnings.filterwarnings("ignore", message="numpy.dtype size changed")
216	    warnings.filterwarnings("ignore", message="numpy.ufunc size changed")
</pre></td></tr></table><h2>numpy.lib</h2><table><tr><td><pre>0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
</pre></td><td><pre>6	from numpy.version import version as __version__
7	
8	from .type_check import *
9	from .index_tricks import *
10	from .function_base import *
</pre></td></tr></table><h2>sre_compile</h2><table><tr><td><pre>0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.06	0.06	<span><span class="c" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
</pre></td><td><pre>99	                emit((av[0]-1)*2)
100	            # _compile_info(code, av[1], flags)
101	            _compile(code, av[1], flags)
102	            if av[0]:
103	                emit(OPCODES[MARK])

	(...)

174	                code[skipyes] = _len(code) - skipyes + 1
175	        else:
176	            raise ValueError, ("unsupported operand type", op)
177	
178	def _compile_charset(charset, flags, code, fixup=None):

	(...)

203	        else:
204	            raise error, "internal: unsupported set operator"
205	    emit(OPCODES[FAILURE])
206	
207	def _optimize_charset(charset, fixup):

	(...)

248	                outappend((RANGE, (p, p+n-1)))
249	        if len(out) &lt; len(charset):
250	            return out
251	    else:
252	        # use bitmap

	(...)

487	
488	    # compile the pattern
489	    _compile(code, p.data, flags)
490	
491	    code.append(OPCODES[SUCCESS])

	(...)

502	        pattern = None
503	
504	    code = _code(p, flags)
505	
506	    # print code
</pre></td></tr></table><h2>numpy.lib.type_check</h2><table><tr><td><pre>0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
</pre></td><td><pre>9	           'common_type']
10	
11	import numpy.core.numeric as _nx
12	from numpy.core.numeric import asarray, asanyarray, array, isnan, \
13	                obj2sctype, zeros
</pre></td></tr></table><h2>numpy.core._internal</h2><table><tr><td><pre>0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
</pre></td><td><pre>138	
139	format_re = re.compile(asbytes(
140	                           r'(?P&lt;order1&gt;[&lt;&gt;|=]?)'
141	                           r'(?P&lt;repeats&gt; *[(]?[ ,0-9L]*[)]? *)'
142	                           r'(?P&lt;order2&gt;[&lt;&gt;|=]?)'
</pre></td></tr></table><h2>re</h2><table><tr><td><pre>0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>



0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
</pre></td><td><pre>188	def compile(pattern, flags=0):
189	    "Compile a regular expression pattern, returning a pattern object."
190	    return _compile(pattern, flags)
191	
192	def purge():

	(...)

238	        raise TypeError, "first argument must be string or compiled pattern"
239	    try:
240	        p = sre_compile.compile(pattern, flags)
241	    except error, v:
242	        raise error, v # invalid expression
</pre></td></tr></table><h2>numpy.core</h2><table><tr><td><pre>0.00	0.00	<span></span>
0.00	0.00	<span></span>
0.00	0.06	<span><span class="o" style="width: 0px"></span></span>
0.00	0.00	<span></span>
0.00	0.00	<span></span>
</pre></td><td><pre>44	
45	
46	from numpy.testing import Tester
47	test = Tester().test
48	bench = Tester().bench
</pre></td></tr></table></body></html>
